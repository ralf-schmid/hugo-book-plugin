{{/* layouts/books/single.html */}}
{{ define "main" }}
<article class="book-detail max-w-3xl mx-auto p-6 prose">

  {{/* TITLE & SUBTITLE */}}
  <header class="mb-6">
    <h1 class="text-3xl font-bold mb-1">{{ .Title }}</h1>
    {{ with .Params.subtitle }}
      <h2 class="text-xl text-gray-600">{{ . }}</h2>
    {{ end }}
  </header>

  {{/* COVER & METADATA */}}
  {{ partial "book-meta.html" . }}

  {{/* RATING (STARS) */}}
  <div class="mt-6">
    <p><strong>{{ i18n "ratingLabel" }}:</strong>
      {{ $r := .Params.rating }}
      {{ range $i := seq 5 }}
        {{ if ge $r $i }}
          <span class="text-yellow-500 text-xl">★</span>
        {{ else }}
          <span class="text-gray-300 text-xl">★</span>
        {{ end }}
      {{ end }}
    </p>
  </div>

  {{/* COMMENT */}}
  {{ if .Params.comment }}
    <section class="mt-6">
      <h3 class="text-xl font-semibold mb-2">{{ i18n "commentTitle" }}</h3>
      {{ .Params.comment | markdownify }}
    </section>
  {{ end }}

  {{/* TAGS */}}
  <footer class="mt-6">
    <p><strong>{{ i18n "tagsLabel" }}:</strong>
      {{ $tags := cond (eq (printf "%T" .Params.tags) "string") (slice .Params.tags) .Params.tags }}
      {{ range $i, $tag := $tags }}
        <a href="{{ "/tags/" | relLangURL }}{{ $tag | urlize }}" class="text-blue-600 hover:underline">{{ $tag }}</a>{{ if lt (add $i 1) (len $tags) }}, {{ end }}
      {{ end }}
    </p>
  </footer>

</article>
{{ end }}
