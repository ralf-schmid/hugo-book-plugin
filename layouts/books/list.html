{{ define "main" }}
  <h1 class="text-3xl font-bold mb-6">{{ i18n "bookListTitle" }}</h1>

  {{ $allTags := slice }}
  {{ range .Pages }}
    {{ range .Params.tags }}
      {{ $allTags = $allTags | append . }}
    {{ end }}
  {{ end }}
  {{ $uniqueTags := uniq $allTags | sort }}
  <nav class="filters mb-8">
    {{ range $uniqueTags }}
      <a href="{{ "/tags/" | relLangURL }}{{ . | urlize }}"
         class="inline-block px-3 py-1 mr-2 mb-2 bg-gray-200 rounded-full text-sm hover:bg-gray-300">
        {{ . }}
      </a>
    {{ end }}
  </nav>

  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
    {{ $size := .Site.Params.book.imageSizeList }}
    {{ $dash := cond (gt (len $size) 0) (printf "-%s" $size) "" }}
    {{ range .Pages.ByDate.Reverse }}
      <article class="book-card border rounded-lg overflow-hidden shadow hover:shadow-lg transition-shadow duration-200">
        <a href="{{ .Permalink }}">
          <img
            src="https://covers.openlibrary.org/b/isbn/{{ .Params.isbn }}{{ $dash }}.jpg?default=false"
            alt="{{ .Title }} Cover"
            class="w-full h-48 object-cover">
          <div class="p-4">
            <h2 class="text-lg font-semibold mb-1">{{ .Title }}</h2>
            <p class="text-sm text-gray-600">
              {{ with .Params.override_author }}{{ . }}{{ else }}{{ index .Params.authors 0 }}{{ end }}
            </p>
          </div>
        </a>
      </article>
    {{ end }}
  </div>
{{ end }}
